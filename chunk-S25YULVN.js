import{b as N,c as T,d as W,e as k,g as D,h as z,i as j,j as B,k as F,l as G,n as R}from"./chunk-6YKYAS34.js";import{d as A,h as $,j as L}from"./chunk-SGCWUNZ4.js";import{$b as E,Bb as f,Db as x,Eb as l,Pa as s,Pb as r,Qb as O,Rb as P,Ub as _,Vb as C,Wb as b,_a as u,ac as q,db as h,h as g,ob as w,qb as M,ra as p,sa as m,tb as v,ub as S,vb as y,vc as I,wb as t,xb as i,xc as V}from"./chunk-PSS57WL7.js";var Y=(n,a)=>a.nom;function H(n,a){if(n&1&&(t(0,"option",7),r(1),i()),n&2){let e=a.$implicit;y("value",e.nom),s(),P(" ",e.nom," ")}}function J(n,a){if(n&1){let e=f();t(0,"section",1)(1,"h3"),r(2,"Connexion"),i(),t(3,"p",3),r(4,"Entrez le nom de l'\xE9quipe et le mot de passe"),i(),t(5,"form",4),x("ngSubmit",function(){p(e);let o=l();return m(o.loginWithSupabase())}),t(6,"label",5),r(7,"Equipe"),i(),t(8,"select",6),b("ngModelChange",function(o){p(e);let c=l();return C(c.username,o)||(c.username=o),m(o)}),v(9,H,2,2,"option",7,Y),E(11,"async"),i(),t(12,"label",8),r(13,"Mot de passe"),i(),t(14,"input",9),b("ngModelChange",function(o){p(e);let c=l();return C(c.password,o)||(c.password=o),m(o)}),i(),t(15,"div",10)(16,"button",11),r(17,"Se connecter"),i()()()()}if(n&2){let e=l();s(8),_("ngModel",e.username),s(),S(q(11,2,e.equipesAll$)),s(5),_("ngModel",e.password)}}function K(n,a){if(n&1){let e=f();t(0,"section",2)(1,"h3"),r(2,"Bienvenue"),i(),t(3,"p",3),r(4,"Vous \xEAtes connect\xE9 en tant que "),t(5,"strong"),r(6),i()(),t(7,"div",10)(8,"button",12),x("click",function(){p(e);let o=l();return m(o.disconnect())}),r(9,"D\xE9connexion"),i()()()}if(n&2){let e=l();s(6),O(e.username)}}var U=class n{constructor(a,e,d){this.appMessage=a;this.globalService=e;this.router=d}username="";password="";isConnected=!1;userID$;equipesAll$;ngOnInit(){this.globalService.getEquipeConnectee().code==0&&(this.globalService.loadAllEquipes(),this.equipesAll$=this.globalService.getAllEquipes(),console.log("Equipes ",this.equipesAll$))}loginWithSupabase(){return g(this,null,function*(){if(!this.username||!this.password){this.appMessage.show("Veuillez remplir les champs utilisateur et mot de passe.",3e3);return}this.globalService.loginWithUserAndPassword(this.username,this.password)!=null&&(this.isConnected=!0,this.appMessage.show(this.username,0))})}disconnect(){return g(this,null,function*(){console.log("D\xE9connexion de",this.username),this.isConnected=!1,this.globalService.initEquipeConnectee(),this.appMessage.clear()})}static \u0275fac=function(e){return new(e||n)(u($),u(L),u(A))};static \u0275cmp=h({type:n,selectors:[["app-identification"]],decls:3,vars:1,consts:[[1,"identification-container"],[1,"id-card"],[1,"id-card","welcome"],[1,"muted"],[1,"login-form",3,"ngSubmit"],["for","team",1,"visually-hidden"],["id","team","name","username","required","",3,"ngModelChange","ngModel"],[3,"value"],["for","password",1,"visually-hidden"],["id","password","type","password","placeholder","Mot de passe","name","password","required","",1,"pwd-input",3,"ngModelChange","ngModel"],[1,"actions"],["type","submit",1,"btn-primary"],[1,"btn-ghost",3,"click"]],template:function(e,d){e&1&&(t(0,"div",0),w(1,J,18,4,"section",1)(2,K,10,1,"section",2),i()),e&2&&(s(),M(d.isConnected==!1?1:2))},dependencies:[R,z,B,F,N,j,T,W,G,D,k,V,I],styles:[".identification-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:24px;width:100%;box-sizing:border-box}.id-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:linear-gradient(180deg,#ffffff05,#ffffff03);border:1px solid rgba(255,255,255,.04);padding:28px;border-radius:12px;box-shadow:0 10px 30px #02061799;color:#e6eef8}.id-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.25rem}.id-card[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{margin:0 0 16px;color:#94a3b8;font-size:16px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.06);background:#0f172a99;color:#f8fafc;outline:none;transition:box-shadow .15s ease,border-color .15s ease}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #3b82f61f;border-color:#3b82f6}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2563eb,#3b82f6);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-ghost[_ngcontent-%COMP%]{background:transparent;color:#cfe8ff;border:1px solid rgba(255,255,255,.06);padding:8px 12px;border-radius:8px;cursor:pointer}.welcome[_ngcontent-%COMP%]{text-align:center}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}@media (max-width: 520px){.id-card[_ngcontent-%COMP%]{padding:20px}.identification-container[_ngcontent-%COMP%]{padding:12px}}.pwd-input[_ngcontent-%COMP%]{font-size:16px;padding:.5rem;width:100%}"]})};export{U as IdentificationComponent};
