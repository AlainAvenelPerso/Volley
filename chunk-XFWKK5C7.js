import{a as N,b as W,c as T,d as k,e as D,f as F,g as z,h as j,i as B,j as G,k as R}from"./chunk-VWG2METB.js";import{c as A,g as L,i as $}from"./chunk-EHOD7XZM.js";import{Ab as E,Ha as a,Qa as g,Rb as q,Tb as I,Ua as w,Vb as V,Ya as M,cb as v,eb as S,fb as f,g as u,gb as t,hb as i,ka as p,la as m,lb as x,mb as _,nb as s,pb as r,qb as y,rb as O,ub as C,vb as b,wb as h,zb as P}from"./chunk-5OGSPR6L.js";function Y(n,l){if(n&1&&(t(0,"option",12),r(1),i()),n&2){let e=l.$implicit;f("value",e.nom),a(),O(" ",e.nom," ")}}function H(n,l){if(n&1){let e=x();t(0,"section",1)(1,"h3"),r(2,"Connexion"),i(),t(3,"p",3),r(4,"Entrez le nom de l'\xE9quipe et le mot de passe"),i(),t(5,"form",4),_("ngSubmit",function(){p(e);let o=s();return m(o.loginWithSupabase())}),t(6,"label",5),r(7,"Equipe"),i(),t(8,"select",6),h("ngModelChange",function(o){p(e);let c=s();return b(c.username,o)||(c.username=o),m(o)}),M(9,Y,2,2,"option",7),P(10,"async"),i(),t(11,"label",8),r(12,"Mot de passe"),i(),t(13,"input",9),h("ngModelChange",function(o){p(e);let c=s();return b(c.password,o)||(c.password=o),m(o)}),i(),t(14,"div",10)(15,"button",11),r(16,"Se connecter"),i()()()()}if(n&2){let e=s();a(8),C("ngModel",e.username),a(),f("ngForOf",E(10,3,e.equipesAll$)),a(4),C("ngModel",e.password)}}function J(n,l){if(n&1){let e=x();t(0,"section",2)(1,"h3"),r(2,"Bienvenue"),i(),t(3,"p",3),r(4,"Vous \xEAtes connect\xE9 en tant que "),t(5,"strong"),r(6),i()(),t(7,"div",10)(8,"button",13),_("click",function(){p(e);let o=s();return m(o.disconnect())}),r(9,"D\xE9connexion"),i()()()}if(n&2){let e=s();a(6),y(e.username)}}var U=class n{constructor(l,e,d){this.appMessage=l;this.globalService=e;this.router=d}username="";password="";isConnected=!1;userID$;equipesAll$;ngOnInit(){this.globalService.getEquipeConnectee().code==0&&(this.globalService.loadAllEquipes(),this.equipesAll$=this.globalService.getAllEquipes(),console.log("Equipes ",this.equipesAll$))}loginWithSupabase(){return u(this,null,function*(){if(!this.username||!this.password){this.appMessage.show("Veuillez remplir les champs utilisateur et mot de passe.",3e3);return}this.globalService.loginWithUserAndPassword(this.username,this.password)!=null&&(this.isConnected=!0,this.appMessage.show(this.username,0))})}disconnect(){return u(this,null,function*(){console.log("D\xE9connexion de",this.username),this.isConnected=!1,this.globalService.initEquipeConnectee(),this.appMessage.clear()})}static \u0275fac=function(e){return new(e||n)(g(L),g($),g(A))};static \u0275cmp=w({type:n,selectors:[["app-identification"]],decls:3,vars:1,consts:[[1,"identification-container"],[1,"id-card"],[1,"id-card","welcome"],[1,"muted"],[1,"login-form",3,"ngSubmit"],["for","team",1,"visually-hidden"],["id","team","name","username","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","password",1,"visually-hidden"],["id","password","type","password","placeholder","Mot de passe","name","password","required","",1,"pwd-input",3,"ngModelChange","ngModel"],[1,"actions"],["type","submit",1,"btn-primary"],[3,"value"],[1,"btn-ghost",3,"click"]],template:function(e,d){e&1&&(t(0,"div",0),v(1,H,17,5,"section",1)(2,J,10,1,"section",2),i()),e&2&&(a(),S(d.isConnected==!1?1:2))},dependencies:[R,F,j,B,N,z,W,T,G,D,k,V,q,I],styles:[".identification-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:24px;width:100%;box-sizing:border-box}.id-card[_ngcontent-%COMP%]{width:100%;max-width:420px;background:linear-gradient(180deg,#ffffff05,#ffffff03);border:1px solid rgba(255,255,255,.04);padding:28px;border-radius:12px;box-shadow:0 10px 30px #02061799;color:#e6eef8}.id-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.25rem}.id-card[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{margin:0 0 16px;color:#94a3b8;font-size:.9rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.06);background:#0f172a99;color:#f8fafc;outline:none;transition:box-shadow .15s ease,border-color .15s ease}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #3b82f61f;border-color:#3b82f6}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#2563eb,#3b82f6);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-ghost[_ngcontent-%COMP%]{background:transparent;color:#cfe8ff;border:1px solid rgba(255,255,255,.06);padding:8px 12px;border-radius:8px;cursor:pointer}.welcome[_ngcontent-%COMP%]{text-align:center}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}@media (max-width: 520px){.id-card[_ngcontent-%COMP%]{padding:20px}.identification-container[_ngcontent-%COMP%]{padding:12px}}.pwd-input[_ngcontent-%COMP%]{font-size:16px;padding:.5rem;width:100%}"]})};export{U as IdentificationComponent};
