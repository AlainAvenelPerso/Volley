import{d as I,j as B}from"./chunk-UB54C472.js";import{Cb as d,Db as s,Dc as F,Fb as k,Hb as R,Ib as y,Jb as p,Qa as f,Ra as l,Sb as S,Ub as m,Vb as $,Wb as C,ab as b,ac as q,ba as M,bc as T,cc as D,fb as E,rb as O,sa as x,ta as P,tb as w,vb as h,wb as g,xb as _,z as v}from"./chunk-CK6SMEMT.js";var X=(i,t)=>t.Nom_Equipe;function H(i,t){if(i&1&&(d(0,"th",3),m(1),s()),i&2){let e=t.$implicit;l(),$(e)}}function L(i,t){if(i&1&&m(0),i&2){let e=p().$implicit,o=p().$implicit;C(" ",o.valeurs[e]," ")}}function V(i,t){if(i&1){let e=k();q(0),d(1,"td",5),y("click",function(){let a=x(e).$implicit,r=D(0),c=p().$implicit,n=p();return P(r?n.onCellClick(c.index,a):null)}),O(2,L,1,1),s()}if(i&2){let e=t.$implicit,o=p(),a=o.$implicit,r=o.$index,c=T(e!==r+1&&a.valeurs[e]);l(),S("diagonale",e===r+1)("clickable",c),l(),w(c?2:-1)}}function j(i,t){if(i&1&&(d(0,"tr")(1,"td",2),m(2),s(),g(3,V,3,6,"td",4,h),s()),i&2){let e=t.$implicit,o=p();l(2),C(" ",e.Nom_Equipe," "),l(),_(o.colonnes)}}var N=class i{constructor(t,e){this.globalService=t;this.router=e;this.swipeThreshold=this.globalService.swipeThreshold}resultats$;colonnes=[];equipesMap={};lignesTableau=[];inverseMapping={};startX=0;swipeThreshold;ngOnInit(){console.log("Resultats page initialized"),this.globalService.loadResultats(96),this.resultats$=v(this.globalService.getResultats()).pipe(M(t=>{console.log("R\xE9sultats bruts :",t);let e=Math.min(...t.map(n=>n.Equipe_Domicile)),a=Math.max(...t.map(n=>n.Equipe_Domicile))-e+1,r={};for(let n=0;n<a;n++)r[e+n]=n+1;let c={};for(let n in r)c[r[n]]=Number(n);this.inverseMapping=c,this.colonnes=Array.from({length:a},(n,u)=>u+1),console.log("Colonnes g\xE9n\xE9r\xE9es :",this.colonnes),this.equipesMap={};for(let n of t){let u=n.Nom_Equipe;this.equipesMap[u]||(this.equipesMap[u]={Nom_Equipe:u,index:r[n.Equipe_Domicile],valeurs:{}}),n.Sets_Domicile!=null&&n.Sets_Exterieur!=null&&(this.equipesMap[u].valeurs[r[n.Equipe_Domicile]]=`${n.Sets_Domicile}-${n.Sets_Exterieur}`,this.equipesMap[u].valeurs[r[n.Equipe_Exterieure]]=`${n.Sets_Domicile}-${n.Sets_Exterieur}`)}this.lignesTableau=Object.values(this.equipesMap)})),this.resultats$.subscribe(),console.log("Resultats observable set up:",this.resultats$)}trackByComposite(t,e){return`${t}-${e}`}onCellClick(t,e){let o=this.inverseMapping[t],a=this.inverseMapping[e];console.log("VRAIS num\xE9ros :",o,a),this.router.navigate(["/detailmatch"],{state:{ED:o,EE:a}})}onPointerDown(t){this.startX=t.clientX,console.log("Pointer up detected",this.startX)}onPointerUp(t){let e=t.clientX-this.startX;console.log("Pointer up detected",e),e>this.swipeThreshold&&(console.log("Swipe gauche d\xE9tect\xE9"),this.router.navigate(["/matchs"])),e<-this.swipeThreshold&&(console.log("Swipe droite d\xE9tect\xE9"),this.router.navigate(["/classement"]))}static \u0275fac=function(e){return new(e||i)(b(B),b(I))};static \u0275cmp=E({type:i,selectors:[["app-resultats"]],hostBindings:function(e,o){e&1&&R("pointerdown",function(r){return o.onPointerDown(r)},f)("pointerup",function(r){return o.onPointerUp(r)},f)},decls:11,vars:0,consts:[[1,"tableau-wrapper"],[1,"tableau-resultats"],[1,"col-equipe"],[1,"score-cell"],[1,"score-cell",3,"diagonale","clickable"],[1,"score-cell",3,"click"]],template:function(e,o){e&1&&(d(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),m(5,"\xC9quipe"),s(),g(6,H,2,1,"th",3,h),s()(),d(8,"tbody"),g(9,j,5,1,"tr",null,X),s()()()),e&2&&(l(6),_(o.colonnes),l(3),_(o.lignesTableau))},dependencies:[F],styles:['@charset "UTF-8";.tableau-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.tableau-resultats[_ngcontent-%COMP%]{width:max-content;border-collapse:collapse;font-size:14px;margin:0 auto}.tableau-resultats[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tableau-resultats[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px;border:1px solid #ddd;text-align:center;color:#000;background-color:#fff}.tableau-resultats[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fafafa}.tableau-resultats[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#eaeaea}.tableau-resultats[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]:not(.diagonale):not(.col-equipe){background-color:#d6eaff!important}.col-equipe[_ngcontent-%COMP%]{position:sticky;left:0;background-color:#fff;font-weight:600;white-space:nowrap;z-index:5;text-align:left}.tableau-resultats[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600}.score-cell[_ngcontent-%COMP%]{min-width:24px;white-space:nowrap;padding-left:0;padding-right:0;background-color:#fff;color:#000}.tableau-resultats[_ngcontent-%COMP%]   td.diagonale[_ngcontent-%COMP%]{background-color:#d0d0d0!important;color:#555;font-style:italic}.tableau-resultats[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td.diagonale[_ngcontent-%COMP%]{background-color:#c4c4c4!important}.tableau-resultats[_ngcontent-%COMP%]   td.clickable[_ngcontent-%COMP%]{cursor:pointer;background-color:#f0f8ff}.tableau-resultats[_ngcontent-%COMP%]   td.clickable[_ngcontent-%COMP%]:hover{background-color:#d6eaff}']})};export{N as Resultats};
